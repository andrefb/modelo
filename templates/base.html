{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <meta name="theme-color" content="#015152">
    <meta name="description" content="Painel Administrativo">
    
    <title>{% block title %}Painel{% endblock %}</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            DEFAULT: '#015152',
                            light: '#026d6e',
                            dark: '#003839',
                            surface: '#f0fdfd',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .sidebar-transition { transition: transform 0.3s ease-in-out; }

        .htmx-indicator { opacity: 0; transition: opacity 200ms ease-in; }
        .htmx-request .htmx-indicator { opacity: 1; }
        .htmx-request.htmx-indicator { opacity: 1; }

        .htmx-settling > * { opacity: 0; }
        .htmx-added > * { opacity: 0; }
        .htmx-swapping > * { opacity: 0; transition: opacity 0.2s ease-out; }
        main { transition: opacity 0.3s ease-in; }
        
        /* Esconde barra de rolagem lateral mas mant√©m funcionalidade */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 antialiased overflow-hidden" hx-boost="true">

    <div class="htmx-indicator fixed top-0 left-0 w-full h-0.5 bg-brand z-50"></div>

    <div class="flex h-screen overflow-hidden bg-gray-50">
        
        {% include 'includes/sidebar.html' %}

        <div class="relative flex flex-col flex-1 overflow-y-auto overflow-x-hidden h-full">

            {% include 'includes/mobile-header.html' %}
            {% include 'includes/topbar.html' %}

            <main class="w-full flex-grow p-4 md:p-6" id="main-content">
                {% if messages %}
                    <div class="mb-6 space-y-2">
                        {% for message in messages %}
                            <div class="p-4 rounded-md text-sm font-medium shadow-sm flex items-center gap-2
                                {% if message.tags == 'error' %}bg-red-50 text-red-700 border border-red-200
                                {% elif message.tags == 'success' %}bg-green-50 text-green-700 border border-green-200
                                {% else %}bg-blue-50 text-blue-700 border border-blue-200{% endif %}">
                                {{ message }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
                
                {% block content %}{% endblock %}
            </main>

        </div>
    </div>

    <script>
        const sidebar = document.getElementById('sidebar');
        const backdrop = document.getElementById('sidebar-backdrop');
        
        function toggleSidebar() {
            sidebar.classList.toggle('translate-x-full');
            if(backdrop) backdrop.classList.toggle('hidden');
        }

        document.body.addEventListener('htmx:configRequest', (event) => {
            event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
        });
    </script>
</body>
</html>